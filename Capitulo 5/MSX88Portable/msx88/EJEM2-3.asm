TIMER EQU 10H
PIC   EQU 20H
EOI   EQU 20H
N_CLK EQU 10

ORG 40
IP_CLK DW RUT_CLK

ORG 1000h
SEG DB '0', '0'
FIN DB ?

ORG 3000H

RUT_CLK: PUSH AX
	 INC SEG+1
	 CMP SEG+1, 3Ah
	 JNZ RESET
	 MOV SEG+1, 30h
	 INC SEG
	 CMP SEG, 36h
	 JNZ RESET
	 MOV SEG, 30h
RESET:   INT 7
	 MOV AL, 0
	 OUT TIMER, AL
	 MOV AL, EOI
	 OUT PIC, AL
	 POP AX
	 IRET

ORG 2000H
	CLI
	MOV AL, 0FDH
	OUT PIC+1, AL
	MOV AL, N_CLK
	OUT PIC+5, AL
	MOV AL, 1
	OUT TIMER+1, AL
	MOV AL, 0
	OUT TIMER, AL
	MOV BX, OFFSET SEG
	MOV AL, OFFSET FIN-OFFSET SEG
	STI
LAZO:	JMP LAZO

END

